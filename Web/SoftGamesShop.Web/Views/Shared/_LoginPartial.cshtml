@using SoftGamesShop.Common
@using SoftGamesShop.Data.Models
@using Microsoft.AspNetCore.Identity
@inject SignInManager<ApplicationUser> SignInManager
@inject UserManager<ApplicationUser> UserManager

<ul class="navbar-nav">
    @if (this.SignInManager.IsSignedIn(this.User))
    {
<li class="nav-item">
    <a class="nav-link text-primary" asp-area="Identity" asp-page="/Account/Manage/Index" title="Manage">Hello @(this.User.Identity.Name)!</a>
</li> if (this.User.IsInRole(GlobalConstants.AdministratorRoleName))
                {
<li class="nav-item">
    <a class="nav-link text-primary" asp-area="Administration" asp-controller="Dashboard" asp-action="Index" title="Admin">Admin</a>
</li> }
<li class="nav-item">
    <form class="form-inline" asp-area="Identity" asp-page="/Account/Logout" asp-route-returnUrl="@(this.Url.Action("Index", "Home", new { area = string.Empty }))">
        <button type="submit" class="nav-link btn btn-link text-primary">Logout</button>
    </form>
</li> }
            else
            {
<li class="nav-item">
    <a class="nav-link text-primary" asp-area="Identity" asp-page="/Account/Register">Register</a>
</li>
                <li class="nav-item">
                    <a class="nav-link text-primary" asp-area="Identity" asp-page="/Account/Login">Login</a>
                </li>}
</ul>
@*<div id="fb-root"></div>
<script async defer crossorigin="anonymous" src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v9.0&appId=2784516788474590&autoLogAppEvents=1" nonce="ceQuIOe4"></script>*@


<script>
    window.fbAsyncInit = function () {
        FB.init({
            appId: '{your-app-id}',
            cookie: true,
            xfbml: true,
            version: '{api-version}'
        });

        FB.AppEvents.logPageView();

    };

    (function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) { return; }
        js = d.createElement(s); js.id = id;
        js.src = "https://connect.facebook.net/en_US/sdk.js";
        fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));
</script>

<fb:login-button scope="public_profile,email"
                 onlogin="checkLoginState();">
</fb:login-button>

